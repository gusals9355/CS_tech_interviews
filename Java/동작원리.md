# 동작원리

## 목표

- Java의 동작 원리에 대해 설명할 수 있다.
- JVM의 역할에 대해 설명할 수 있다.
- JIT 컴파일러에 대해 설명할 수 있다.

자바는 OS에 독립적인 특징을 가지고 있다.

그것이 가능한 이유는 JVM 상에서 실행되기 때문이다.

JVM이란 간단하게 설명하면 자바 소스코드 컴파일 후 JVM에 적재되고, OS로 부터 메모리를 할당받아 GC를 통해 스스로 메모리 관리를 한다는 특징이 있다.

![https://raw.githubusercontent.com/jun17183/tech-refrigerator/master/Language/JAVA/resources/java-%EB%8F%99%EC%9E%91%EC%9B%90%EB%A6%AC-002.png](https://raw.githubusercontent.com/jun17183/tech-refrigerator/master/Language/JAVA/resources/java-%EB%8F%99%EC%9E%91%EC%9B%90%EB%A6%AC-002.png)

1. 작성한 자바 소스(.java)를 자바 컴파일러를 통해 자바 바이트 코드(.class)로 컴파일한다.
2. 컴파일 된 바이트코드를 JVM의 클래스 로더에게 전달한다.
3. JVM의 클래스 로더는 동적 로딩을 통해 필요한 클래스들을 로딩 및 링크하여 런타임 데이터 영역, 즉 JVM의 메모리에 올린다.
4. 실행엔진은 JVM 메모리에 올라온 바이트 코드들을 명령어 단위로 하나씩 가져와서 실행한다. 이때 실행 엔진은 2가지 방식으로 동작할 수 있다.
    - 자바 인터프리터 : 바이트 코드 명령어를 하나씩 읽어서 해석하고 실행한다. 하나하나의 실행은 빠르지만, 전체적인 실행 속도가 느리다는 단점이 있다.
    - JIT 컴파일러(Just-In-Time Compiler) : 인터프리터의 단점을 보완하기 위해 도입된 방식으로 바이트 코드 전체를 컴파일하여 바이너리 코드로 변경하고 이후에는 해당 메소드를 더이상 인터프리팅 하지 않고, 바이너리 코드로 직접 실행하는 방식이다. 하나씩 인터프리팅하여 실행하는 것이 아니라 바이트 코드 전체가 컴파일된 바이너리 코드를 실행하는 것이기 때문에 전체적인 실행 속도는 인터프리팅 방식보다 빠르다.
    

추가적으로 JRE와 JDK에 대해

JRE : Java Runtime enviroment 로 자바 실행 환경의 약자이다. JVM이 자바 프로그램을 실행시킬 때 반드시 필요한 라이브러리 및 기타 필수 파일들을 가지고 있다. 만약 자바 프로그램 개발이 아닌 단순히 자바 프로그램 실행만을 위한 일이면 JRE만 다운 받아 설치하면된다.

JDK : Java Development Kit의 약자이다. JRE 외 개발을 위해 필요한 도구를 가지고 있다. 실행도 필요하고 개발 작업까지 필수적으로 해야하는 개발자들이 설치하는 Kit이라고 이해하면 된다. 그래서 javac, java, javaw등 개발에 필요한 프로그램을 가지고 있다.
